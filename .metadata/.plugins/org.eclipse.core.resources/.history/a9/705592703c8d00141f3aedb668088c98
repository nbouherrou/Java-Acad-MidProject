package org.jacademie.projet1.utils;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.ArrayList;

import org.apache.commons.io.FilenameUtils;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.jacademie.projet1.constants.Constants;

public class FileUtils {

	private static Logger logger = LogManager.getLogger(FileUtils.class);

	public ArrayList<Path> findFileInRepoWithGoodExtension(String path , String extension) {
		
		ArrayList<Path> pathList = new ArrayList<Path>();
		
		try {

			Files.walk(Paths.get(path)).forEach(
					filePath -> {
						if (Files.isRegularFile(filePath)) {

							String ext = FilenameUtils.getExtension(filePath
									.toString());

							if (ext.equals(extension)) {
								System.out.println(filePath);
								
								pathList.add(filePath);
							}

						}
					});

		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return pathList;

	}
	
	public static void main(String[] args) {
		FileUtils fileUtils = new FileUtils();
		
		
		
		System.out.println(fileUtils.findFileInRepoWithGoodExtension(Constants.path, "music"));
	}

}
